---
title: "Replace it"
author: " Carlos van der Ley, Christine Kwon, Connor, Leonardo Gonzalez"
output: 
  html_document:
    toc: true
    toc_float: true
    code_folding: hide
---

## Title (replace it)



## Authors

Carlos van der Ley, Christine Kwon, Connor, Leonardo Gonzalez

## Introduction



## Questions

**1. **

**2. **

**3. **

**4. **

## Data

### Data Introduction



### Load packages
```{r load-packages, message=FALSE}
library(tidyverse)
library(tidymodels)
library(forcats)
library(olsrr)
library(skimr)
library(srvyr)
library(osfr) #from osf website
```

### Data Import
```{r data-import, echo=FALSE}

if(!file.exists("data/mental_health.rda")) {
  cidr <- getwd()
  mkfldr <- "data/"
  dir.create(file.path(cidr, mkfldr), recursive = TRUE)
  osf_retrieve_file("https://osf.io/7peyq/data/input/5efd0743af1156008d3b5532") |> 
    osf_download("data/") #it works
}

```

### Data Wrangling

```{r data-wrangling, message = FALSE}

if(!file.exists("data/mental_health.rda")) {
  # GET RELATED MENTAL FILES
  mental_files = "anxiety| |socialanxiety | healthanxiety | autism | adhd | ptsd | lonely | depression | suicidewatch | bipolarreddit | bpd | addiction | alcoholism | schizophrenia"
  
  data <- list.files(recursive = TRUE,
                     path = "data/reddit_mental_health_dataset",
                     pattern = mental_files,
                     full.names = TRUE) |>
    purrr::map(~read_csv(.))
  
  # COMBINE DATASETS
  red_mh <- data |>
    map_df(bind_rows)
  
  # SELECT IMPORTANT FEATURES FROM DATASET
  red_mh <- red_mh |>
    select(subreddit, author,	date, post, n_words, sent_neg, sent_neu, sent_pos, isolation_total,economic_stress_total, domestic_stress_total, liwc_anger, liwc_anxiety, liwc_negative_emotion, liwc_positive_emotion, liwc_sadness)
  
  # SPLIT DATE IN YEAR MONTH AND DAY
  red_mh_mod <- red_mh |>
    separate(date, c("year", "month", "day"), remove = TRUE)
  
  # PIVOT SENTENCE SENTIMENT
  red_mh_mod <- red_mh_mod |> 
    pivot_longer(sent_neg:sent_pos, names_to = "post_sent", values_to = "prob_sent")
  
  # PIVOT LIWC
  red_mh_mod <- red_mh_mod |> pivot_longer(liwc_anger:liwc_sadness, names_to = "people_sent", values_to = "people_sent_val", names_pattern = "liwc_(.*)")
  
  # SAVE THE FINAL DATASET
  save(red_mh, file="data/mental_health.rda")
  save(red_mh_mod, file="data/mental_health_wrangled.rda")
  
  # DELETE RAW DATA: 107 FILES, +/- 2.6GB
  unlink("data/reddit_mental_health_dataset", recursive = TRUE)
}

```

#### Load the data

```{r}
# LOAD THE DATASET
load("data/mental_health.rda")
load("data/mental_health_wrangled.rda")
```

#### A (may be removed later)

#### B (may be removed later)

## Analysis



### Exploratory Data Analysis

```{r}
skim(red_mh)
skim(red_mh_mod)
```

## Data Analysis

### Question 1:

```r{}

```
-ANSWER QUESTION 1

### Question 2:

```r{}

```
-ANSWER QUESTION 2

### Question 3:

```r{}

```
-ANSWER QUESTION 3

### Question 4:

```r{}

```

-ANSWER QUESTION 4

## Modeling

-ADD MODELS HERE

### Results

-ADD RESULTS (WE CAN SKIP IF WERE ALREADY ANSWERED)

## Conclusion

-ADD CONCLUSION (SUMMARIZE THE QUESTIONS AND ANSWERS)
